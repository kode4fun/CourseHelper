import{aT as E,aK as k,o as u,V as v,az as y,w as V,G as x,H as o,y as a,C as t,aL as C,aC as L,ax as I,ay as K}from"./index-CGxF7N_l.js";import{E as B}from"./el-dialog-B1Y6ytCC.js";import{a as p,E as _}from"./el-col-BmCsp_2D.js";import"./isUndefined-DCTLXrZ8.js";const T={class:"main"},b={__name:"LoginView",setup(z){const g=k(),i=u(!0),c=u(""),d=u(),m=l=>{l.target.classList.toggle("animation-shake"),l.target.removeEventListener("animationend",m)},w=()=>i.value=!1,h=async()=>{function l(e){return new Promise((s,n)=>setTimeout(()=>{var f;if(e==="wenchuan")s({code:0});else{const r=(f=d.value)==null?void 0:f.$el;r&&r.classList.toggle("animation-shake"),r&&(r.onAnimationEnd=()=>{m(),s({code:-1,msg:"口令错误"})})}},Math.random()*200+500))}await l(c.value).then(e=>{if(e.code===0)localStorage.setItem("token","user_logined"),g.push("/");else throw new Error(e.msg)}).catch(()=>{}).finally(()=>{})};return v(()=>{}),(l,e)=>{const s=y("el-icon-key");return V(),x("div",T,[o(t(B),{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=n=>i.value=n),title:"请输入访问口令","before-close":w,style:{width:"15%","min-width":"320px"},"close-on-press-escape":!1,"align-center":!0,"show-close":!1,"close-on-click-modal":!1},{footer:a(()=>[o(t(p),{class:"input-row"},{default:a(()=>[o(t(_),{offset:18,span:6},{default:a(()=>[o(t(C),{type:"primary",onClick:h},{default:a(()=>[L("确定")]),_:1})]),_:1})]),_:1})]),default:a(()=>[o(t(p),{class:"input-row"},{default:a(()=>[o(t(_),{span:24,ref_key:"refKouling",ref:d},{default:a(()=>[o(t(I),{placeholder:"口令",modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value=n),"show-password":""},{prefix:a(()=>[o(t(K),{color:"var(--el-color-primary)",size:"large"},{default:a(()=>[o(s)]),_:1})]),_:1},8,["modelValue"])]),_:1},512)]),_:1})]),_:1},8,["modelValue"])])}}},R=E(b,[["__scopeId","data-v-492ec450"]]);export{R as default};
